#!/usr/bin/bash 

FUNC="esmol_list_tests"
SCRIPT="${FUNC}.m"


echo "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%"	>  $SCRIPT
echo "%% NOTE:                                            %%"	>> $SCRIPT
echo "%% This file was initially auto-generated by        %%"	>> $SCRIPT
echo "%% ./esmol_update_tests.sh                          %%"	>> $SCRIPT
echo "%%                                                  %%"	>> $SCRIPT
echo "%% The list of available tests may be regenerated   %%"	>> $SCRIPT
echo "%% by executing that script again from cygwin.      %%"	>> $SCRIPT
echo "%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%"	>> $SCRIPT

echo "function result = ${FUNC}()" 				>> $SCRIPT
echo "	result = {" 						>> $SCRIPT

for file in `find unit -name \*mdl`; 
do 
  echo -n "		"					>> $SCRIPT
  echo "'`basename $file`'", "'`dirname $file`'"		>> $SCRIPT 
done 

echo "	};" 							>> $SCRIPT
echo "end" 							>> $SCRIPT

cat $SCRIPT
