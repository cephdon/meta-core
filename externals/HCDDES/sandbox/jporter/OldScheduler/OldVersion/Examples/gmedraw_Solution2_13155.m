cm = colormap;
cs = size(cm,1);

rectangle( 'Position', [5,46,1,5], 'FaceColor', cm( floor( 0.727273 * cs )+1, :) );
rectangle( 'Position', [55,46,1,5], 'FaceColor', cm( floor( 0.727273 * cs )+1, :) );
rectangle( 'Position', [4,46,1,5], 'FaceColor', cm( floor( 0.818182 * cs )+1, :) );
rectangle( 'Position', [7,46,2,5], 'FaceColor', cm( floor( 0.909091 * cs )+1, :) );
rectangle( 'Position', [57,46,2,5], 'FaceColor', cm( floor( 0.909091 * cs )+1, :) );
rectangle( 'Position', [2,31,1,5], 'FaceColor', cm( floor( 0.636364 * cs )+1, :) );
rectangle( 'Position', [3,1,1,5], 'FaceColor', cm( floor( 0.181818 * cs )+1, :) );
rectangle( 'Position', [23,1,1,5], 'FaceColor', cm( floor( 0.181818 * cs )+1, :) );
rectangle( 'Position', [43,1,1,5], 'FaceColor', cm( floor( 0.181818 * cs )+1, :) );
rectangle( 'Position', [63,1,1,5], 'FaceColor', cm( floor( 0.181818 * cs )+1, :) );
rectangle( 'Position', [83,1,1,5], 'FaceColor', cm( floor( 0.181818 * cs )+1, :) );
rectangle( 'Position', [4,1,3,5], 'FaceColor', cm( floor( 0 * cs )+1, :) );
rectangle( 'Position', [29,1,3,5], 'FaceColor', cm( floor( 0 * cs )+1, :) );
rectangle( 'Position', [54,1,3,5], 'FaceColor', cm( floor( 0 * cs )+1, :) );
rectangle( 'Position', [79,1,3,5], 'FaceColor', cm( floor( 0 * cs )+1, :) );
rectangle( 'Position', [2,1,1,5], 'FaceColor', cm( floor( 0.0909091 * cs )+1, :) );
rectangle( 'Position', [12,1,1,5], 'FaceColor', cm( floor( 0.0909091 * cs )+1, :) );
rectangle( 'Position', [22,1,1,5], 'FaceColor', cm( floor( 0.0909091 * cs )+1, :) );
rectangle( 'Position', [32,1,1,5], 'FaceColor', cm( floor( 0.0909091 * cs )+1, :) );
rectangle( 'Position', [42,1,1,5], 'FaceColor', cm( floor( 0.0909091 * cs )+1, :) );
rectangle( 'Position', [52,1,1,5], 'FaceColor', cm( floor( 0.0909091 * cs )+1, :) );
rectangle( 'Position', [62,1,1,5], 'FaceColor', cm( floor( 0.0909091 * cs )+1, :) );
rectangle( 'Position', [72,1,1,5], 'FaceColor', cm( floor( 0.0909091 * cs )+1, :) );
rectangle( 'Position', [82,1,1,5], 'FaceColor', cm( floor( 0.0909091 * cs )+1, :) );
rectangle( 'Position', [92,1,1,5], 'FaceColor', cm( floor( 0.0909091 * cs )+1, :) );
rectangle( 'Position', [7,1,1,5], 'FaceColor', cm( floor( 0.272727 * cs )+1, :) );
rectangle( 'Position', [5,16,1,5], 'FaceColor', cm( floor( 0.454545 * cs )+1, :) );
rectangle( 'Position', [55,16,1,5], 'FaceColor', cm( floor( 0.454545 * cs )+1, :) );
rectangle( 'Position', [2,16,3,5], 'FaceColor', cm( floor( 0.363636 * cs )+1, :) );
rectangle( 'Position', [52,16,3,5], 'FaceColor', cm( floor( 0.363636 * cs )+1, :) );
rectangle( 'Position', [6,16,1,5], 'FaceColor', cm( floor( 0.545455 * cs )+1, :) );

text( -10, 5, 'P2', 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -3, 2, 'Est2', 'BackgroundColor', cm( floor( 0 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -10, 2, 'Sensor', 'BackgroundColor', cm( floor( 0.0909091 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -17, 2, 'Est1', 'BackgroundColor', cm( floor( 0.181818 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -24, 2, 'SyncRcvr', 'BackgroundColor', cm( floor( 0.272727 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -10, 20, 'P3', 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -3, 17, 'Control', 'BackgroundColor', cm( floor( 0.363636 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -10, 17, 'Actuation', 'BackgroundColor', cm( floor( 0.454545 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -17, 17, 'SyncRcvr2', 'BackgroundColor', cm( floor( 0.545455 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -10, 35, 'P1', 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -3, 32, 'SyncTask', 'BackgroundColor', cm( floor( 0.636364 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -10, 50, 'Bus', 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -3, 47, 'ValMsg1', 'BackgroundColor', cm( floor( 0.727273 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -10, 47, 'SyncMsg', 'BackgroundColor', cm( floor( 0.818182 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -17, 47, 'ValMsg2', 'BackgroundColor', cm( floor( 0.909091 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
v = axis();
axis( [ -31 v(2) v(3) v(4)] );
