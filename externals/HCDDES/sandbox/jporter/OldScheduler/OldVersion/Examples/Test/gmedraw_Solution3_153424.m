cm = colormap;
cs = size(cm,1);

rectangle( 'Position', [4,31,1,5], 'FaceColor', cm( floor( 0.666667 * cs )+1, :) );
rectangle( 'Position', [24,31,1,5], 'FaceColor', cm( floor( 0.666667 * cs )+1, :) );
rectangle( 'Position', [44,31,1,5], 'FaceColor', cm( floor( 0.666667 * cs )+1, :) );
rectangle( 'Position', [64,31,1,5], 'FaceColor', cm( floor( 0.666667 * cs )+1, :) );
rectangle( 'Position', [84,31,1,5], 'FaceColor', cm( floor( 0.666667 * cs )+1, :) );
rectangle( 'Position', [3,31,1,5], 'FaceColor', cm( floor( 0.833333 * cs )+1, :) );
rectangle( 'Position', [13,31,1,5], 'FaceColor', cm( floor( 0.833333 * cs )+1, :) );
rectangle( 'Position', [23,31,1,5], 'FaceColor', cm( floor( 0.833333 * cs )+1, :) );
rectangle( 'Position', [33,31,1,5], 'FaceColor', cm( floor( 0.833333 * cs )+1, :) );
rectangle( 'Position', [43,31,1,5], 'FaceColor', cm( floor( 0.833333 * cs )+1, :) );
rectangle( 'Position', [53,31,1,5], 'FaceColor', cm( floor( 0.833333 * cs )+1, :) );
rectangle( 'Position', [63,31,1,5], 'FaceColor', cm( floor( 0.833333 * cs )+1, :) );
rectangle( 'Position', [73,31,1,5], 'FaceColor', cm( floor( 0.833333 * cs )+1, :) );
rectangle( 'Position', [83,31,1,5], 'FaceColor', cm( floor( 0.833333 * cs )+1, :) );
rectangle( 'Position', [93,31,1,5], 'FaceColor', cm( floor( 0.833333 * cs )+1, :) );
rectangle( 'Position', [2,1,1,5], 'FaceColor', cm( floor( 0.333333 * cs )+1, :) );
rectangle( 'Position', [12,1,1,5], 'FaceColor', cm( floor( 0.333333 * cs )+1, :) );
rectangle( 'Position', [22,1,1,5], 'FaceColor', cm( floor( 0.333333 * cs )+1, :) );
rectangle( 'Position', [32,1,1,5], 'FaceColor', cm( floor( 0.333333 * cs )+1, :) );
rectangle( 'Position', [42,1,1,5], 'FaceColor', cm( floor( 0.333333 * cs )+1, :) );
rectangle( 'Position', [52,1,1,5], 'FaceColor', cm( floor( 0.333333 * cs )+1, :) );
rectangle( 'Position', [62,1,1,5], 'FaceColor', cm( floor( 0.333333 * cs )+1, :) );
rectangle( 'Position', [72,1,1,5], 'FaceColor', cm( floor( 0.333333 * cs )+1, :) );
rectangle( 'Position', [82,1,1,5], 'FaceColor', cm( floor( 0.333333 * cs )+1, :) );
rectangle( 'Position', [92,1,1,5], 'FaceColor', cm( floor( 0.333333 * cs )+1, :) );
rectangle( 'Position', [3,1,1,5], 'FaceColor', cm( floor( 0.166667 * cs )+1, :) );
rectangle( 'Position', [23,1,1,5], 'FaceColor', cm( floor( 0.166667 * cs )+1, :) );
rectangle( 'Position', [43,1,1,5], 'FaceColor', cm( floor( 0.166667 * cs )+1, :) );
rectangle( 'Position', [63,1,1,5], 'FaceColor', cm( floor( 0.166667 * cs )+1, :) );
rectangle( 'Position', [83,1,1,5], 'FaceColor', cm( floor( 0.166667 * cs )+1, :) );
rectangle( 'Position', [6,1,1,5], 'FaceColor', cm( floor( 0 * cs )+1, :) );
rectangle( 'Position', [31,1,1,5], 'FaceColor', cm( floor( 0 * cs )+1, :) );
rectangle( 'Position', [56,1,1,5], 'FaceColor', cm( floor( 0 * cs )+1, :) );
rectangle( 'Position', [81,1,1,5], 'FaceColor', cm( floor( 0 * cs )+1, :) );
rectangle( 'Position', [2,16,1,5], 'FaceColor', cm( floor( 0.5 * cs )+1, :) );
rectangle( 'Position', [12,16,1,5], 'FaceColor', cm( floor( 0.5 * cs )+1, :) );
rectangle( 'Position', [22,16,1,5], 'FaceColor', cm( floor( 0.5 * cs )+1, :) );
rectangle( 'Position', [32,16,1,5], 'FaceColor', cm( floor( 0.5 * cs )+1, :) );
rectangle( 'Position', [42,16,1,5], 'FaceColor', cm( floor( 0.5 * cs )+1, :) );
rectangle( 'Position', [52,16,1,5], 'FaceColor', cm( floor( 0.5 * cs )+1, :) );
rectangle( 'Position', [62,16,1,5], 'FaceColor', cm( floor( 0.5 * cs )+1, :) );
rectangle( 'Position', [72,16,1,5], 'FaceColor', cm( floor( 0.5 * cs )+1, :) );
rectangle( 'Position', [82,16,1,5], 'FaceColor', cm( floor( 0.5 * cs )+1, :) );
rectangle( 'Position', [92,16,1,5], 'FaceColor', cm( floor( 0.5 * cs )+1, :) );

text( -10, 5, 'P1', 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -3, 2, 'Task3', 'BackgroundColor', cm( floor( 0 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -10, 2, 'Task2', 'BackgroundColor', cm( floor( 0.166667 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -17, 2, 'Task1', 'BackgroundColor', cm( floor( 0.333333 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -10, 20, 'P2', 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -3, 17, 'Task4', 'BackgroundColor', cm( floor( 0.5 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -10, 35, 'Bus1', 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -3, 32, 'Message2', 'BackgroundColor', cm( floor( 0.666667 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
text( -10, 32, 'Message1', 'BackgroundColor', cm( floor( 0.833333 * cs )+1, :), 'EdgeColor', [0 0 0], 'HorizontalAlignment', 'center' );
v = axis();
axis( [ -24 v(2) v(3) v(4)] );
